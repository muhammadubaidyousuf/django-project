{% extends '../base.html' %}
{% block title %}Post Your Car For Rent{% endblock %}
{% block body %}
<div class="add-car-main-body">
	<div class="rps-img-div">
	{% if messages %}
		{% for message in messages %}
			{{message}}
		{% endfor %}
	{% endif %}
	</div>
		<div class="res-form-card">
		<form action="" method="POST" enctype="multipart/form-data">
			{% csrf_token %}
			<h2>Title and price</h2>
			<div class="rps-label-div">
				<label class="rps-label" for="c-title">Post Title</label>
				<input class="responsiv-input" type="text" name="c-title" placeholder="Title" required>
			</div>

			<div class="rps-label-div">
				<label class="rps-label" for="c-par-day-price">Per Day Rent</label>
				<input class="responsiv-input" type="text" name="c-par-day-price" placeholder="Price" required>
			</div>	
		</div>
		<div class="res-form-card">
			<h2>Car information</h2>
			<div class="rps-label-div">
				<label class="rps-label" for="c-color">Car Color</label>
				<select name="c-color" id="browser" class="responsiv-input" placeholder="Car Color">
					<option value="Red">Red</option>
					<option value="Blue">Blue</option>
					<option value="Black">Black</option>
					<option value="Gray">Gray</option>
					<option value="White">White</option>
				</select>
			</div>
			<div class="rps-label-div">
				<label class="rps-label" for="c-model">Car Model Year</label>
				<select class="responsiv-input" name="c-model" required placeholder="Model Year">
					{% for year in years %}
					<option value="{{ year }}">{{ year }}</option>
					{% endfor %}
				</select>
			</div>	
			<div class="rps-label-div">
				<label class="rps-label" for="c-car-name">Chose A Car</label>
				<select type="text" name="c-car-name" class="responsiv-input">
					{% for car in get_imgs %}
						<option value="{{ car.name_img }}">{{ car.name_img }}</option>
					{% endfor %}
				</select>
			</div>
			<div class="rps-label-div">
				<label class="rps-label" for="c-number-plate">License No Plate</label>
				<input class="responsiv-input" type="text" name="c-number-plate" placeholder="License Plate" required>
			</div>	
		</div>

		<div class="res-form-card">
			<h2 id="afterImg">Upload multiple image files</h2>
			<div class="upload-cars-imgs" id="after">
				<label for="files">
					<input type="file" id="files" name="files[]" onchange="FF(this)" multiple>
					<i class="fa fa-camera"></i>
				</label>
			</div>
		</div>
		<div class="res-form-card">
			<h2>Address</h2>
			<div class="rps-label-div">
				<input type="hidden" id="c-let" name="c-let-1">
				<input type="hidden" id="c-log" name="c-log-2">
			</div>	

			<div class="rps-label-div">	
				<label class="rps-label" for="c-model">City</label>
				<input class="responsiv-input" value="Karachi" type="text" name="c-user-city" placeholder="City" required>
			</div>
			<div class="rps-label-div">	
				<label class="rps-label" for="c-model">Address</label>
				<input class="responsiv-input" type="text" name="c-address" placeholder="Address" required>
			</div>

			<div class="rps-label-div">
				<p class="rps-label">Self Driver</p>
				<label class="label-radio" for="yes">Yes
					<input type="radio" id="yes" name="c-self-driver" value="yes">
					<span></span>
				</label>
				<label class="label-radio" for="no">No
					<input type="radio" id="no" name="c-self-driver" value="no" checked="checked">
					<span></span>
				</label>
			</div>	
			<div class="rps-label-div textarea-inp">
				<label class="rps-label" for="c-dec">Type Some Details </label>
				<textarea class="responsiv-input" name="c-dec" placeholder="Write Some About" required="Fill this fild"></textarea>
			</div>
			<div class="rps-label-div">
				<button class="submit-btn" id="add-car-submit" type="submit" name="add-post">Submit</button>
			</div>	
		</form>
	</div>
	</div>
</div>


<script>
function FF(ee){
	for (var i = 0; i < $(".pip").length; i++) {
		alert(i)
	}
	var name = document.getElementById('files');
	var isValid = /\.(jpe?g|png|gif|bmp|jpeg)$/i.test(name.value)
	var FileSize = name.files[0].size / 1024 / 1024;
	if(!isValid){
		document.getElementById('files').value = "";
		alert("Please Upload Image File")
	}else if($("#files")[0].files.length > 2){
		alert("Only 2 files")
	}else if (FileSize > 1){
		alert("Max File Size (1 MB)")
		document.getElementById('files').value = "";
	}else if($(".pip").length > 5){
		alert("Only 5 Images")
	} 
}



	$(document).ready(function() {
  if (window.File && window.FileList && window.FileReader) {
    $("#files").on("change", function(e) {
      var files = e.target.files,
        filesLength = files.length;
      for (var i = 0; i < filesLength; i++) {
        var f = files[i]
        var fileReader = new FileReader();
        fileReader.onload = (function(e) {
          var file = e.target;
          $("<span class=\"pip\">" +
            "<img class=\"imageThumb\" src=\"" + e.target.result + "\" title=\"" + file.name + "\"/>" +
            "<br/><span class=\"remove\">Remove image</span>" +
            "</span>").insertAfter("#after");
          $(".remove").click(function(){
            $(this).parent(".pip").remove();
          });
   
        });
        fileReader.readAsDataURL(f);
      }
    });
  } else {
    alert("Your browser doesn't support to File API")
  }
});

</script>
	
{% endblock %}
